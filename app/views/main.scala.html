@import org.maproulette.session.User
@import org.maproulette.actions.Actions
@(user:User, debugMode:Boolean, parentType:String=Actions.ITEM_TYPE_CHALLENGE_NAME, parentId:Long=(-1), taskId:Long=(-1))(implicit messages: Messages, req: play.api.mvc.RequestHeader)
@minified() = {@{debugMode match { case true => "-debug"; case false => "" }}}
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/mapping.css")"/>
<link rel="stylesheet" href="@routes.WebJarAssets.at(WebJarAssets.locate("leaflet.css"))"/>
<script src="@routes.WebJarAssets.at(WebJarAssets.locate("leaflet.js"))"></script>

<div id="map" class="map"></div>

<script src="@routes.Assets.at("javascripts/mapping.js")"></script>
<script>
    $(document).ready(function() {
        MRManager.init('map', new Point(@{user.osmProfile.homeLocation.latitude}, @{user.osmProfile.homeLocation.longitude}))
        MRManager.addTaskToMap(@parentId, @taskId, '@parentType');
    });
</script>
